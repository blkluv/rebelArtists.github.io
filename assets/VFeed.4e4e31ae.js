import{m as e,_ as s,a}from"./mdb.umd.min.8982d985.js";import{u as o,a as t,b as d}from"./index.3a7766ab.js";import{h as i,z as r,o as n,c as l,b as c,a as m,I as k,Q as u,k as y,t as v,l as h,B as p,P as g,A as C,N as w,q as M}from"./vendor.904bcd4c.js";const f={name:"RandomFeed",emits:["like-event"],components:{MDBCard:e.exports.MDBCard,MDBCardBody:e.exports.MDBCardBody,MDBCardText:e.exports.MDBCardText,MDBCardImg:e.exports.MDBCardImg,LikersModal:s,ToggleFavorite:a},data:()=>({componentKey:0,showModal:!1,showLikersModal:!1,stateLoaded:!1,idToCheck:null,waveformOptions:{backend:"MediaElement",mediaControls:!0,interact:!1,barWidth:2,responsive:!0,height:145,hideScrollbar:!0,cursorWidth:0}}),mounted(){this.$nextTick((()=>{this.checkIsLiked()}))},methods:{async checkIsLiked(){const{isLiked:e,getRandomPosts:s}=o(),a=o(),{randomPostsArray:t}=i(a);await s(),await e(t._rawValue),this.stateLoaded=!0},async updateparent(){this.checkIsLiked(),this.componentKey+=1,this.$emit("like-event",!0)}},setup(){const e=o(),{randomPosts:s,likedArray:a}=i(e);return{randomPosts:s,getCloudinaryUrlImage:t,getCloudinaryUrlVideo:d,likedArray:a}}},L={key:0},B={key:0,class:"noPostsDiv"},D={class:"wrapperFeed"},I={class:"media-wrap"},P={class:"figureClassFeed"},x={key:0,class:"card-img-style",controls:"",controlsList:"nodownload"},T=["src"],b={key:1,class:"audioCardFeed"},R=["onClick"],F={key:1,id:"favoriting"},A={key:2,id:"favoriting"};f.render=function(e,o,t,d,i,w){const M=r("wavesurfer"),f=r("MDBCardImg"),_=r("router-link"),E=r("MDBCardText"),U=s,V=a,H=r("MDBCardBody"),S=r("MDBCard");return this.stateLoaded?(n(),l("div",L,[d.randomPosts[0]?c("",!0):(n(),l("div",B,"no posts yet.")),m("div",D,[(n(!0),l(k,null,u(d.randomPosts,((e,s)=>(n(),l("div",{class:"gallery-panel",key:s},[m("div",I,[y(S,{class:"card-style hover-overlay"},{default:v((()=>[y(_,{to:`/post/${e.id}`,"active-class":"active",exact:""},{default:v((()=>[m("figure",P,["video"==e.mediaType?(n(),l("video",x,[m("source",{src:d.getCloudinaryUrlVideo(e.mediaHash)},null,8,T)])):c("",!0),"audio"==e.mediaType?(n(),l("div",b,[y(M,{src:d.getCloudinaryUrlVideo(e.mediaHash),options:i.waveformOptions},null,8,["src","options"])])):c("",!0),"image"==e.mediaType?(n(),h(f,{key:2,src:d.getCloudinaryUrlImage(e.mediaHash),top:"",hover:"",alt:"...",class:"card-img-style"},null,8,["src"])):c("",!0)])])),_:2},1032,["to"]),y(H,{class:"card-body"},{default:v((()=>[y(E,{class:"cardName"},{default:v((()=>[p(g(e.name),1)])),_:2},1024),y(E,null,{default:v((()=>[m("a",{class:"likesHover",onClick:s=>(i.showLikersModal=!0,i.idToCheck=e.id)},g(e.likes)+" likes ",9,R),i.showLikersModal&&i.idToCheck==e.id?(n(),h(C,{key:0,to:"body"},[y(U,{show:i.showLikersModal,postId:e.id,onClose:o[0]||(o[0]=e=>i.showLikersModal=!1)},null,8,["show","postId"])])):c("",!0),d.likedArray[s]?c("",!0):(n(),l("div",F,[y(V,{id:e.id,onLikeEvent:w.updateparent},null,8,["id","onLikeEvent"])])),d.likedArray[s]?(n(),l("div",A,[y(V,{id:e.id,intialFavorited:!0,onLikeEvent:w.updateparent},null,8,["id","onLikeEvent"])])):c("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])])))),128))])])):c("",!0)};const _={name:"DiscoverFeed",emits:["like-event"],components:{MDBCard:e.exports.MDBCard,MDBCardBody:e.exports.MDBCardBody,MDBCardText:e.exports.MDBCardText,MDBCardImg:e.exports.MDBCardImg,LikersModal:s,ToggleFavorite:a},data:()=>({componentKey:0,showModal:!1,showLikersModal:!1,stateLoaded:!1,idToCheck:null,waveformOptions:{backend:"MediaElement",mediaControls:!0,interact:!1,barWidth:2,responsive:!0,height:145,hideScrollbar:!0,cursorWidth:0}}),mounted(){this.$nextTick((()=>{this.checkIsLiked()}))},methods:{async checkIsLiked(){const{isLiked:e,getPostsLatest:s}=o(),a=o(),{latestPostsArray:t}=i(a);await s(),await e(t._rawValue),this.stateLoaded=!0},async updateparent(){const{isLiked:e,getPostsLatest:s}=o(),a=o(),{latestPostsArray:t}=i(a);await s(),await e(t._rawValue),this.componentKey+=1,this.$emit("like-event",!0)}},setup(){const e=o(),{latestPosts:s,likedArray:a}=i(e);return{latestPosts:s,likedArray:a,getCloudinaryUrlImage:t,getCloudinaryUrlVideo:d}}},E={key:0},U={key:0,class:"noPostsDiv"},V={class:"wrapperFeed"},H={class:"media-wrap-feed"},S={class:"figureClassFeed"},$={key:0,class:"card-img-style",controls:"",controlsList:"nodownload"},N=["src"],W={key:1,class:"audioCardFeed"},K=["onClick"],O={key:1,id:"favoriting"},j={key:2,id:"favoriting"};_.render=function(e,o,t,d,i,w){const M=r("wavesurfer"),f=r("MDBCardImg"),L=r("router-link"),B=r("MDBCardText"),D=s,I=a,P=r("MDBCardBody"),x=r("MDBCard");return this.stateLoaded?(n(),l("div",E,[d.latestPosts[0]?c("",!0):(n(),l("div",U,"no posts yet.")),m("div",V,[(n(!0),l(k,null,u(d.latestPosts,((e,s)=>(n(),l("div",{class:"gallery-panel-feed",key:s},[m("div",H,[y(x,{class:"card-style hover-overlay"},{default:v((()=>[y(L,{to:`/post/${e.id}`,"active-class":"active",exact:""},{default:v((()=>[m("figure",S,["video"==e.mediaType?(n(),l("video",$,[m("source",{src:d.getCloudinaryUrlVideo(e.mediaHash)},null,8,N)])):c("",!0),"audio"==e.mediaType?(n(),l("div",W,[y(M,{src:d.getCloudinaryUrlVideo(e.mediaHash),options:i.waveformOptions},null,8,["src","options"])])):c("",!0),"image"==e.mediaType?(n(),h(f,{key:2,src:d.getCloudinaryUrlImage(e.mediaHash),top:"",hover:"",alt:"...",class:"card-img-style"},null,8,["src"])):c("",!0)])])),_:2},1032,["to"]),y(P,{class:"card-body"},{default:v((()=>[y(B,{class:"cardName"},{default:v((()=>[p(g(e.name),1)])),_:2},1024),y(B,null,{default:v((()=>[m("a",{class:"likesHover",onClick:s=>(i.showLikersModal=!0,i.idToCheck=e.id)},g(e.likes)+" likes ",9,K),i.showLikersModal&&i.idToCheck==e.id?(n(),h(C,{key:0,to:"body"},[y(D,{show:i.showLikersModal,postId:e.id,onClose:o[0]||(o[0]=e=>i.showLikersModal=!1)},null,8,["show","postId"])])):c("",!0),d.likedArray[s]?c("",!0):(n(),l("div",O,[y(I,{id:e.id,onLikeEvent:w.updateparent},null,8,["id","onLikeEvent"])])),d.likedArray[s]?(n(),l("div",j,[y(I,{id:e.id,intialFavorited:!0,onLikeEvent:w.updateparent},null,8,["id","onLikeEvent"])])):c("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])])))),128))])])):c("",!0)};const q={name:"VFeed",components:{DiscoverFeed:_,RandomFeed:f},data:()=>({showRandomPosts:!1}),methods:{toggleShowRandomItems(){this.showRandomPosts=!this.showRandomPosts}},setup(){const e=new w({duration:2e3,position:{x:"center",y:"bottom"},types:[{type:"loading",background:"orange",duration:0,dismissible:!0,icon:{className:"icon icon-loading",tagName:"i"}}]}),s=o(),{account:a}=i(s);return M("notyf",e),{account:a}}},z={id:"content"},G={key:0,class:"main animated"},Q={class:"main-content"},J={class:"feedHeader"},X={class:"toggleWrapper"},Y={key:0,class:"latestInactive"},Z={key:0,class:"latestActive"},ee=m("div",{class:"divider"},"|",-1),se={key:0,class:"randomInactive"},ae={key:1,class:"randomActive"},oe={class:"feedGrid"},te={key:0,class:"feedBox"},de={key:1,class:"feedBox"};q.render=function(e,s,a,o,t,d){const i=r("DiscoverFeed"),k=f;return n(),l("section",z,[o.account?(n(),l("div",G,[m("div",Q,[m("div",J,[m("div",X,[m("a",{onClick:s[0]||(s[0]=(...e)=>d.toggleShowRandomItems&&d.toggleShowRandomItems(...e))},[t.showRandomPosts?(n(),l("div",Y,"latest")):c("",!0)]),t.showRandomPosts?c("",!0):(n(),l("div",Z,"latest")),ee,m("a",{onClick:s[1]||(s[1]=(...e)=>d.toggleShowRandomItems&&d.toggleShowRandomItems(...e))},[t.showRandomPosts?c("",!0):(n(),l("div",se,"random"))]),t.showRandomPosts?(n(),l("div",ae,"random")):c("",!0)])]),m("div",oe,[t.showRandomPosts?c("",!0):(n(),l("div",te,[y(i)])),t.showRandomPosts?(n(),l("div",de,[y(k)])):c("",!0)])])])):c("",!0)])};export{q as default};
