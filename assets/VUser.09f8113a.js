import{h as e,N as a,q as s,o as t,l as o,t as i,c as n,a as d,b as r,T as l,B as c,Q as u,k as m,A as h,x as k,y as p,z as y,I as g,R as v}from"./vendor.b087ac14.js";import{u as w,g as L,_ as C,i as f,a as M,b as I,c as b}from"./index.50cd9a22.js";import{m as B,a as D,_ as x}from"./mdb.umd.min.3b31480c.js";import{_ as $}from"./404.34bf79ed.js";const A={name:"DonationModal",emits:["close"],props:{show:{type:Boolean,default:!1},userAddress:{type:String,default:""}},components:{},data:()=>({componentKey:0,stateLoaded:!1,donationAmt:0,donationValid:!1,loading:!1}),mounted(){},methods:{async fireDonate(a){this.loading=!0;const{donationToUser:s}=w(),t=w(),{account:o}=e(t);o!=a?await s(a,this.donationAmt):console.log("can't donate to self"),this.loading=!1,this.$emit("close")},validateDonation(e){this.donationAmt=e.target.value,this.donationAmt>=0?this.donationValid=!0:this.donationValid=!1}},setup(){const e=new a({duration:2e3,position:{x:"center",y:"bottom"},types:[{type:"loading",background:"orange",duration:0,dismissible:!0,icon:{className:"icon icon-loading",tagName:"i"}}]});return s("notyf",e),{}}},T={key:0,class:"modal-donation-mask"},U={class:"login-box-donation"},P=d("h2",null,"Artist Donation",-1),E={class:"user-box-donation"},_=c("Amount to Send (MATIC) "),V={key:0,class:"warningTextDonation"},H={key:1,class:"successfulTextDonation"},S={class:"donateButton"},O=[d("span",null,null,-1),d("span",null,null,-1),d("span",null,null,-1),d("span",null,null,-1),c(" Donate ")],F={key:1,class:"loading-donations animated fadeIn"},K=[d("span",null,null,-1),d("span",null,null,-1),d("span",null,null,-1),d("span",null,null,-1),c(" Donating "),d("div",{class:"bgFollow"},null,-1)],N={class:"modal-donations-footer"};A.render=function(e,a,s,c,u,m){return t(),o(l,{name:"modal"},{default:i((()=>[s.show?(t(),n("div",T,[d("div",U,[P,d("form",null,[d("div",E,[d("input",{type:"number",min:"0",step:".001",onInput:a[0]||(a[0]=e=>m.validateDonation(e))},null,32),d("label",null,[_,this.donationValid?r("",!0):(t(),n("span",V," (must be greater than 0) ")),this.donationValid?(t(),n("span",H," âœ“ ")):r("",!0)])]),d("div",S,[u.loading?r("",!0):(t(),n("a",{key:0,class:"donateHover",onClick:a[1]||(a[1]=e=>m.fireDonate(this.userAddress))},O)),u.loading?(t(),n("a",F,K)):r("",!0)])])]),d("div",N,[d("button",{class:"modal-donations-button",onClick:a[2]||(a[2]=a=>e.$emit("close"))}," x ")])])):r("",!0)])),_:1})};const G={name:"UserProfileHeader",components:{},data:()=>({componentKey:0,loading:!1,stateLoaded:!1,showDonationModal:!1}),mounted(){this.$nextTick((()=>{this.checkIsFollowing()}))},watch:{$route(e,a){e!==a&&this.checkIsFollowing()}},methods:{async checkIsFollowing(){const{getUserByOwner:e}=w();this.$route.params.name&&await e(this.$route.params.name.toLowerCase()),this.stateLoaded=!0},async updateParent(){const{getUserByOwner:e}=w();this.$route.params.name&&await e(this.$route.params.name.toLowerCase()),this.showDonationModal=!1},async fireDonate(a){this.loading=!0;const{donationToUser:s}=w(),t=w(),{account:o}=e(t);o!=a?(await s(a,1),await this.checkIsFollowing()):console.log("can't donate to self"),this.componentKey+=1,this.loading=!1}},setup(){const a=w(),{postedItems:s,user:t,account:o}=e(a);return{account:o,postedItems:s,user:t,getImgUrl:L,getAvatar:e=>{let a=k(p,{seed:e,scale:80,translateY:-3}),s=new Blob([a],{type:"image/svg+xml"});return URL.createObjectURL(s)},createUserLink:e=>"https://rebelartists.github.io/user/".concat(e)}}},j={key:0,class:"wrapper2"},W={class:"box userAvatar"},R=["src"],q={class:"box addressHash"},z={class:"box shareButton"},Q={class:"box likeCount"},Y={class:"box postCount"},J={class:"box amtEarned"};G.render=function(e,a,s,i,l,c){const k=A;return this.stateLoaded&&this.$route.params.name?(t(),n("div",j,[d("div",W,[d("div",null,[d("img",{src:i.getAvatar(this.$route.params.name.toLowerCase()),class:"round-image"},null,8,R)])]),d("div",q,u(this.$route.params.name.substring(0,4))+"..."+u(this.$route.params.name.slice(-4)),1),d("div",z,[l.loading?r("",!0):(t(),n("button",{key:0,class:"buttonConnectProfile",onClick:a[0]||(a[0]=e=>l.showDonationModal=!0)}," Donate ")),l.showDonationModal?(t(),o(h,{key:1,to:"body"},[m(k,{show:l.showDonationModal,userAddress:this.$route.params.name.toLowerCase(),onClose:c.updateParent},null,8,["show","userAddress","onClose"])])):r("",!0)]),d("div",Q,u(i.user.totalLikes)+" likes",1),d("div",Y,u(i.user.postCount)+" posts",1),d("div",J,u(i.user.amtEarned)+" earned",1)])):r("",!0)};const X={name:"UserGallery",emits:["like-event"],components:{MDBCard:B.exports.MDBCard,MDBCardBody:B.exports.MDBCardBody,MDBCardText:B.exports.MDBCardText,MDBCardImg:B.exports.MDBCardImg,ToggleFavorite:D,LikersModal:x,UploadModal:C},data:()=>({componentKey:0,showModal:!1,showLikersModal:!1,stateLoaded:!1,idToCheck:null,waveformOptions:{backend:"MediaElement",mediaControls:!0,interact:!1,barWidth:2,responsive:!0,height:145,hideScrollbar:!0,cursorWidth:0}}),mounted(){this.$nextTick((()=>{this.checkIsLiked()}))},methods:{async checkIsLiked(){const{isLiked:a,getPostsByOwner:s}=w(),t=w(),{postsArray:o}=e(t);this.$route.params.name&&(await s(this.$route.params.name),await a(o._rawValue)),this.stateLoaded=!0},async updateparent(){this.checkIsLiked(),this.componentKey+=1,this.$emit("like-event",!0)}},watch:{$route(e,a){e!==a&&this.checkIsLiked()}},setup(){const a=w(),{postedItems:s,likedArray:t,account:o}=e(a);return{isVideo:f,postedItems:s,likedArray:t,account:o,getCloudinaryUrlImage:M,getCloudinaryUrlVideo:I}}},Z={key:0},ee={key:0,class:"container"},ae=d("div",{class:"bg"},null,-1),se=d("h3",null,"custom header",-1),te={key:1,class:"container"},oe={class:"wrapperGallery"},ie={class:"media-wrap-gallery"},ne={class:"figureClass"},de={key:0,class:"card-img-style-gallery",controls:"",controlsList:"nodownload"},re=["src"],le={key:1,class:"audioCardGallery"},ce=["onClick"],ue={key:1,id:"favoriting"},me={key:2,id:"favoriting"};X.render=function(e,a,s,l,k,p){const w=y("UploadModal"),L=y("wavesurfer"),C=y("MDBCardImg"),f=y("router-link"),M=y("MDBCardText"),I=x,b=D,B=y("MDBCardBody"),$=y("MDBCard");return this.stateLoaded?(t(),n("div",Z,[l.postedItems[0]||l.account!=this.$route.params.name?r("",!0):(t(),n("div",ee,[ae,d("button",{class:"modalButton",id:"show-modal",onClick:a[0]||(a[0]=e=>k.showModal=!0)}," + "),(t(),o(h,{to:"body"},[m(w,{show:k.showModal,onClose:a[1]||(a[1]=e=>k.showModal=!1)},{header:i((()=>[se])),_:1},8,["show"])]))])),l.postedItems[0]||l.account==this.$route.params.name?r("",!0):(t(),n("div",te," no posts yet. ")),d("div",oe,[(t(!0),n(g,null,v(l.postedItems,((e,s)=>(t(),n("div",{class:"gallery-panel",key:s},[d("div",ie,[m($,{class:"card-style hover-overlay"},{default:i((()=>[m(f,{to:`/post/${e.id}`,"active-class":"active",exact:""},{default:i((()=>[d("figure",ne,["video"==e.mediaType?(t(),n("video",de,[d("source",{src:l.getCloudinaryUrlVideo(e.mediaHash)},null,8,re)])):r("",!0),"audio"==e.mediaType?(t(),n("div",le,[m(L,{src:l.getCloudinaryUrlVideo(e.mediaHash),options:k.waveformOptions},null,8,["src","options"])])):r("",!0),"image"==e.mediaType?(t(),o(C,{key:2,src:l.getCloudinaryUrlImage(e.mediaHash),top:"",hover:"",alt:"...",class:"card-img-style-gallery"},null,8,["src"])):r("",!0)])])),_:2},1032,["to"]),m(B,{class:"card-body"},{default:i((()=>[m(M,{class:"cardName"},{default:i((()=>[c(u(e.name),1)])),_:2},1024),m(M,null,{default:i((()=>[d("a",{class:"likesHover",onClick:a=>(k.showLikersModal=!0,k.idToCheck=e.id)},u(e.likes)+" likes ",9,ce),k.showLikersModal&&k.idToCheck==e.id?(t(),o(h,{key:0,to:"body"},[m(I,{show:k.showLikersModal,postId:e.id,onClose:a[2]||(a[2]=e=>k.showLikersModal=!1)},null,8,["show","postId"])])):r("",!0),l.likedArray[s]?r("",!0):(t(),n("div",ue,[m(b,{id:e.id,onLikeEvent:p.updateparent},null,8,["id","onLikeEvent"])])),l.likedArray[s]?(t(),n("div",me,[m(b,{id:e.id,intialFavorited:!0,onLikeEvent:p.updateparent},null,8,["id","onLikeEvent"])])):r("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])])))),128))])])):r("",!0)};const he={name:"UserLikedGallery",emits:["like-event"],components:{MDBCard:B.exports.MDBCard,MDBCardBody:B.exports.MDBCardBody,MDBCardText:B.exports.MDBCardText,MDBCardImg:B.exports.MDBCardImg,ToggleFavorite:D},data:()=>({componentKey:0,showModal:!1,showLikersModal:!1,stateLoaded:!1,idToCheck:null,waveformOptions:{backend:"MediaElement",mediaControls:!0,interact:!1,barWidth:2,responsive:!0,height:145,hideScrollbar:!0,cursorWidth:0}}),mounted(){this.$nextTick((()=>{this.checkIsLiked()}))},methods:{async checkIsLiked(){const{isLiked:a,getLikedPostsByOwner:s}=w(),t=w(),{likedPostArray:o}=e(t);this.$route.params.name&&(await s(this.$route.params.name),await a(o._rawValue)),this.stateLoaded=!0},async updateparent(){this.checkIsLiked(),this.componentKey+=1,this.$emit("like-event",!0)}},watch:{$route(e,a){e!==a&&this.checkIsLiked()}},setup(){const a=w(),{likedPostItems:s,likedArray:t,account:o}=e(a);return{likedPostItems:s,likedArray:t,account:o,getCloudinaryUrlImage:M,getCloudinaryUrlVideo:I}}},ke={key:0},pe={key:0,class:"container"},ye={class:"wrapper"},ge={class:"media-wrap"},ve={class:"figureClassLiked"},we={key:0,class:"card-img-style",controls:"",controlsList:"nodownload"},Le=["src"],Ce={key:1,class:"audioCardLiked"},fe=["onClick"],Me={key:1,id:"favoriting"},Ie={key:2,id:"favoriting"};he.render=function(e,a,s,l,k,p){const w=y("wavesurfer"),L=y("MDBCardImg"),C=y("router-link"),f=y("MDBCardText"),M=x,I=D,b=y("MDBCardBody"),B=y("MDBCard");return this.stateLoaded?(t(),n("div",ke,[l.likedPostItems[0]?r("",!0):(t(),n("div",pe,"no liked posts yet.")),d("div",ye,[(t(!0),n(g,null,v(l.likedPostItems,((e,s)=>(t(),n("div",{class:"gallery-panel",key:s},[d("div",ge,[m(B,{class:"card-style hover-overlay"},{default:i((()=>[m(C,{to:`/post/${e.id}`,"active-class":"active",exact:""},{default:i((()=>[d("figure",ve,["video"==e.mediaType?(t(),n("video",we,[d("source",{src:l.getCloudinaryUrlVideo(e.mediaHash)},null,8,Le)])):r("",!0),"audio"==e.mediaType?(t(),n("div",Ce,[m(w,{src:l.getCloudinaryUrlVideo(e.mediaHash),options:k.waveformOptions},null,8,["src","options"])])):r("",!0),"image"==e.mediaType?(t(),o(L,{key:2,src:l.getCloudinaryUrlImage(e.mediaHash),top:"",hover:"",alt:"...",class:"card-img-style"},null,8,["src"])):r("",!0)])])),_:2},1032,["to"]),m(b,{class:"card-body"},{default:i((()=>[m(f,{class:"cardName"},{default:i((()=>[c(u(e.name),1)])),_:2},1024),m(f,null,{default:i((()=>[d("a",{class:"likesHover",onClick:a=>(k.showLikersModal=!0,k.idToCheck=e.id)},u(e.likes)+" likes ",9,fe),k.showLikersModal&&k.idToCheck==e.id?(t(),o(h,{key:0,to:"body"},[m(M,{show:k.showLikersModal,postId:e.id,onClose:a[0]||(a[0]=e=>k.showLikersModal=!1)},null,8,["show","postId"])])):r("",!0),l.likedArray[s]?r("",!0):(t(),n("div",Me,[m(I,{id:e.id,onLikeEvent:p.updateparent},null,8,["id","onLikeEvent"])])),l.likedArray[s]?(t(),n("div",Ie,[m(I,{id:e.id,intialFavorited:!0,onLikeEvent:p.updateparent},null,8,["id","onLikeEvent"])])):r("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])])))),128))])])):r("",!0)};const be={name:"VUser",components:{ErrorPage:$,UserGallery:X,UserLikedGallery:he,UserProfileHeader:G},props:{ready:{type:Boolean,default:!1}},data:()=>({componentKey:0,postReady:!1,stateLoaded:!1,showLikedPosts:!1,title:"SLAPPTASTIC"}),mounted(){this.$nextTick((()=>{this.getUserContent()}))},methods:{async getUserContent(){const{getUserByOwner:e}=w();this.$route.params.name&&b(this.$route.params.name)&&await e(this.$route.params.name),this.stateLoaded=!0},async updateparent(){await this.getUserContent(),this.componentKey+=1},toggleShowLikedItems(){this.showLikedPosts=!this.showLikedPosts}},setup(){const t=new a({duration:2e3,position:{x:"center",y:"bottom"},types:[{type:"loading",background:"orange",duration:0,dismissible:!0,icon:{className:"icon icon-loading",tagName:"i"}}]}),o=w(),{account:i,user:n}=e(o);return s("notyf",t),{account:i,user:n,isAddress:b}}},Be={id:"content"},De={class:"main animated"},xe={class:"main-content"},$e={key:0},Ae={key:1},Te={class:"toggleWrapper"},Ue={key:0,class:"createdInactive"},Pe={key:0,class:"createdActive"},Ee=d("div",{class:"divider"},"|",-1),_e={key:0,class:"likedInactive"},Ve={key:1,class:"likedActive"};be.render=function(e,a,s,i,l,c){const u=y("ErrorPage"),h=G,k=X,p=he;return t(),n("section",Be,[d("div",De,[d("div",xe,[i.isAddress(this.$route.params.name)?r("",!0):(t(),n("div",$e,[m(u)])),this.stateLoaded&&i.user&&i.isAddress(this.$route.params.name)?(t(),n("div",Ae,[m(h),d("div",Te,[d("a",{onClick:a[0]||(a[0]=(...e)=>c.toggleShowLikedItems&&c.toggleShowLikedItems(...e))},[l.showLikedPosts?(t(),n("div",Ue,"created")):r("",!0)]),l.showLikedPosts?r("",!0):(t(),n("div",Pe,"created")),Ee,d("a",{onClick:a[1]||(a[1]=(...e)=>c.toggleShowLikedItems&&c.toggleShowLikedItems(...e))},[l.showLikedPosts?r("",!0):(t(),n("div",_e,"liked"))]),l.showLikedPosts?(t(),n("div",Ve,"liked")):r("",!0)]),l.showLikedPosts?r("",!0):(t(),o(k,{key:0,onLikeEvent:c.updateparent},null,8,["onLikeEvent"])),l.showLikedPosts?(t(),o(p,{key:1,onLikeEvent:c.updateparent},null,8,["onLikeEvent"])):r("",!0)])):r("",!0)])])])};export{be as default};
